{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/nf-core/demultiplex/master/assets/schema_input.json",
    "title": "nf-core/demultiplex pipeline - params.input schema",
    "description": "Schema for the file provided with params.input",
    "type": "array",
    "items": {
        "type": "object",
        "required": ["taxon_id", "gca", "platform", "tissue", "run_accession", "pair1", "md5_1"],
        "additionalProperties": false,
        "properties": {
            "taxon_id": {
                "type": "string",
                "description": "NCBI taxon ID",
                "pattern": "^\\d+$",
                "errorMessage": "Taxon ID must be a number",
                "meta": ["taxon_id"]
            },
            "gca": {
                "type": "string",
                "description": "Genome assembly accession",
                "pattern": "^GCA_\\d{9}\\.\\d$",
                "errorMessage": "GCA must be in the format GCA_000000000.0",
                "meta": ["gca"]
            },
            "platform": {
                "type": "string",
                "description": "Sequencing platform",
                "enum": ["ILLUMINA", "IONTORRENT", "PACBIO", "OXFORDNANOPORE"],
                "meta": ["platform"]
            },
            "paired": {
                "type": "boolean",
                "description": "Whether the reads are paired-end or single-end",
                "default": true,
                "meta": ["paired"]
            },
            "tissue": {
                "type": "string",
                "description": "Tissue type",
                "pattern": "^\\S+$",
                "errorMessage": "Tissue type must be provided and cannot contain spaces",
                "meta": ["tissue"]
            },
            "run_accession": {
                "type": "string",
                "description": "Run accession number",
                "pattern": "^\\S+$",
                "errorMessage": "Run accession must be provided and cannot contain spaces",
                "meta": ["run_accession"]
            },
            "pair1": {
                "type": "string",
                "description": "Path to the first read file",
                "format": "file-path",
                "pattern": "^\\S+\\.fastq\\.gz$",
                "errorMessage": "Pair 1 file must be a gzipped FASTQ file"
            },
            "md5_1": {
                "type": "string",
                "description": "MD5 checksum for the first read file",
                "pattern": "^[a-f0-9]{32}$",
                "errorMessage": "MD5 checksum must be a 32-character hexadecimal string"
            },
            "pair2": {
                "type": "string",
                "description": "Path to the second read file",
                "format": "file-path",
                "pattern": "^\\S+\\.fastq\\.gz$",
                "errorMessage": "Pair 2 file must be a gzipped FASTQ file"
            },
            
            "md5_2": {
                "type": "string",
                "description": "MD5 checksum for the second read file",
                "pattern": "^[a-f0-9]{32}$",
                "errorMessage": "MD5 checksum must be a 32-character hexadecimal string"
            }
        }
    },
    "allOf": [
        {"if": {"properties": {"paired": {"const": true}}}, "then": {"required": ["pair2", "md5_2"]}},
        {
            "if": {"properties": {"paired": {"const": false}}},
            "then": {"not": {"anyOf": [{"required": ["pair2"]}, {"required": ["md5_2"]}]}}
        }
    ]
}
